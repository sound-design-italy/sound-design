<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ENMODE SYSTEMS – Modules</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>

<div id="header"></div>

<main class="packs-page">
  <h1 class="page-title" id="evento-titolo">Loading...</h1>

  <p class="page-subtitle" id="evento-desc">
    Please wait while the latest event is loaded.
  </p>

  <section class="packs-grid">
    <div class="pack-card">
      <div class="media">
        <img id="evento-img" src="" alt="Evento" style="width:100%; border-radius:12px;">
        <span class="neon"></span>
      </div>
      <div class="info">
        <h2 id="evento-data">Data evento</h2>
        <p id="evento-alt-desc">Dettagli evento</p>
      </div>
    </div>
  </section>
</main>

<!-- OVERLAY -->
<div class="page-overlay"></div>

<div id="footer"></div>

<script type="module">
import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm'

// --- Inserisci le credenziali reali Supabase ---
const supabaseUrl = 'https://uoyyobfarvzlyfzhkbyc.supabase.co'
const supabaseKey = 'sb_publishable_zD9kxPnoScnSlEbFuFMm0A_1aIrlcbE'
const supabase = createClient(supabaseUrl, supabaseKey)

// Funzione per aggiornare l’evento in pagina
async function caricaUltimoEvento() {
  const { data, error } = await supabase
    .from('eventi_cliente')
    .select('*')
    .order('id', { ascending: false })
    .limit(1)

  if(error) {
    console.error('Errore Supabase:', error)
    document.getElementById('evento-titolo').innerText = 'Errore nel caricamento evento'
    return
  }

  const evento = data[0]
  if(!evento) return

  document.getElementById('evento-titolo').innerText = evento.titolo
  document.getElementById('evento-desc').innerText = evento.descrizione
  document.getElementById('evento-data').innerText = evento.data
  document.getElementById('evento-alt-desc').innerText = evento.descrizione
  document.getElementById('evento-img').src = evento.immagine_url
}

caricaUltimoEvento()
</script>

</body>
</html>